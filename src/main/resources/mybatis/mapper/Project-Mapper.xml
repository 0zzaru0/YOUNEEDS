<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="project">

 	<resultMap type="projectDto" id="projectDtoJoin">
 		<result property="p_title" column="P_TITLE"/>
 		<result property="p_category" column="P_CATEGORTY"/>
 		<result property="target_amount" column="TARGET_AMOUNT"/>
 		<result property="p_regdate" column="P_REGDATE"/>
 		<result property="start_date" column="START_DATE"/>
 		<result property="end_date" column="END_DATE"/>
 		<result property="creator_uid" column="CREATOR_UID"/>
 	</resultMap>	
 
 	<!-- 프로젝트 조회 -->
 	<select id="searchProjectList" parameterType="com.web.youneeds.dto.ProjectDto" 
 	 			resultType="com.web.youneeds.dto.ProjectDto">
	 	 select 
		 	 p_id, 
		 	 p_title, 
		 	 p_category, 
		 	 target_amount, 
		 	 p_regdate, 
		 	 start_date, 
		 	 end_date, 
		 	 creator_uid
		 from project
		 <if test="p_category != null and !''.equals(p_category)">
		 	where p_category = #{p_category}
		 </if>
 	 </select> 
 	
 	<!-- 프로젝트 등록 -->
 	<insert id="insertProject" parameterType="com.web.youneeds.dto.ProjectDto">
 		INSERT INTO Project
 		(
 			p_id,
 			p_title,
 			p_category,
 			target_amount,
 			p_regdate,
 			start_date,
 			end_date,
 			creator_uid
 		 ) VALUES (
 		 	PROJECT_SEQ.NEXTVAL,
 		 	#{p_title},
 		 	#{p_category},
 		 	#{target_amount},
 		 	SYSDATE,
 		 	TO_DATE(#{start_date}, 'YYYY-MM-DD HH24:MI'),
 		 	TO_DATE(#{end_date}, 'YYYY-MM-DD HH24:MI'),
 		 	1
 		 )	
 	</insert>
 
 
 </mapper>